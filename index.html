<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .tab-active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .status-normal { background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); }
        .status-abnormal { background: linear-gradient(135deg, #f87171 0%, #ef4444 100%); }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex-1">
                    <h1 class="text-3xl font-bold text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</h1>
                    <p class="text-center mt-2 opacity-90">Generator ‚Ä¢ Fire Pump ‚Ä¢ Water Pump Inspection System</p>
                </div>
                <div class="flex items-center space-x-2">
                    <div id="connection-status" class="flex items-center space-x-2 bg-white bg-opacity-20 rounded-lg px-3 py-2">
                        <div id="status-indicator" class="w-3 h-3 rounded-full bg-yellow-400"></div>
                        <span id="status-text" class="text-sm">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-white shadow-md sticky top-0 z-10">
        <div class="container mx-auto px-4">
            <div class="flex space-x-1">
                <button onclick="showTab('daily')" id="daily-tab" class="tab-active text-white px-6 py-3 rounded-t-lg font-medium transition-all">
                    ‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
                </button>
                <button onclick="showTab('weekly')" id="weekly-tab" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-t-lg font-medium transition-all hover:bg-gray-300">
                    ‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                </button>
                <button onclick="showTab('incident')" id="incident-tab" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-t-lg font-medium transition-all hover:bg-gray-300">
                    ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
                </button>
                <button onclick="showTab('inventory')" id="inventory-tab" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-t-lg font-medium transition-all hover:bg-gray-300">
                    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£
                </button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <!-- Daily Inspection Tab -->
        <div id="daily-content" class="tab-content">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h2>
                    <div class="flex items-center space-x-4">
                        <input type="date" id="daily-date" class="border rounded-lg px-3 py-2" value="">
                        <select id="shift-select" class="border rounded-lg px-3 py-2">
                            <option value="morning">‡πÄ‡∏ß‡∏£‡πÄ‡∏ä‡πâ‡∏≤ (08:00-16:00)</option>
                            <option value="afternoon">‡πÄ‡∏ß‡∏£‡∏ö‡πà‡∏≤‡∏¢ (16:00-24:00)</option>
                            <option value="night">‡πÄ‡∏ß‡∏£‡∏î‡∏∂‡∏Å (24:00-08:00)</option>
                        </select>
                    </div>
                </div>

                <!-- Water Pump Systems -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-blue-800">üè¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏∂‡∏Å</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="water-pumps">
                        <!-- Water pump items will be generated by JavaScript -->
                    </div>
                </div>

                <!-- Fire Pump Systems -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-red-800">üöí ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á (Fire Pump)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="fire-pumps">
                        <!-- Fire pump items will be generated by JavaScript -->
                    </div>
                </div>

                <!-- Generators -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-yellow-800">‚ö° ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (Generator)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="generators">
                        <!-- Generator items will be generated by JavaScript -->
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="saveDailyInspection()" class="gradient-bg text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 transition-all">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
                    </button>
                </div>
            </div>
        </div>

        <!-- Weekly Inspection Tab -->
        <div id="weekly-content" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</h2>
                    <input type="week" id="weekly-date" class="border rounded-lg px-3 py-2">
                </div>

                <div class="space-y-6" id="weekly-inspections">
                    <!-- Weekly inspection items will be generated by JavaScript -->
                </div>

                <div class="flex justify-center mt-6">
                    <button onclick="saveWeeklyInspection()" class="gradient-bg text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 transition-all">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                    </button>
                </div>
            </div>
        </div>

        <!-- Incident Report Tab -->
        <div id="incident-content" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</h2>
                
                <form id="incident-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</label>
                            <input type="datetime-local" id="incident-date" class="w-full border rounded-lg px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£</label>
                            <select id="incident-type" class="w-full border rounded-lg px-3 py-2" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                                <option value="generator">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</option>
                                <option value="fire-pump">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á</option>
                                <option value="water-pump">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏∂‡∏Å</option>
                                <option value="elevator">‡∏•‡∏¥‡∏ü‡∏ï‡πå</option>
                                <option value="electrical">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</option>
                                <option value="plumbing">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏õ‡∏≤</option>
                                <option value="air-conditioning">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÅ‡∏ú‡∏ô‡∏Å/‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label>
                            <select id="incident-location" class="w-full border rounded-lg px-3 py-2" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å/‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</label>
                            <select id="incident-severity" class="w-full border rounded-lg px-3 py-2" required>
                                <option value="low">‡∏ï‡πà‡∏≥ - ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</option>
                                <option value="medium">‡∏Å‡∏•‡∏≤‡∏á - ‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô</option>
                                <option value="high">‡∏™‡∏π‡∏á - ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                <option value="critical">‡∏ß‡∏¥‡∏Å‡∏§‡∏ï - ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
                            <input type="number" id="repair-time" class="w-full border rounded-lg px-3 py-2" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ" min="0">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</label>
                        <textarea id="incident-description" rows="4" class="w-full border rounded-lg px-3 py-2" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô..." required></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</label>
                        <textarea id="incident-action" rows="3" class="w-full border rounded-lg px-3 py-2" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß..."></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</label>
                            <select id="incident-status" class="w-full border rounded-lg px-3 py-2" required>
                                <option value="in-progress">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà</option>
                                <option value="forwarded">‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠</option>
                                <option value="waiting">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</option>
                                <option value="completed">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°</label>
                            <input type="text" id="repair-sender" class="w-full border rounded-lg px-3 py-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</label>
                        <input type="text" id="incident-reporter" class="w-full border rounded-lg px-3 py-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô" required>
                    </div>
                    
                    <div class="flex justify-center">
                        <button type="submit" class="gradient-bg text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 transition-all">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
                        </button>
                    </div>
                </form>

                <!-- Incident History -->
                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</h3>
                    <div id="incident-history" class="space-y-4">
                        <!-- Incident history will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory-content" class="tab-content hidden">
            <div class="space-y-6">
                <!-- Generator Inventory -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">‚ö° ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</h2>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300">
                            <thead class="gradient-bg text-white">
                                <tr>
                                    <th class="border border-gray-300 px-4 py-3 text-left">KVA Rating</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏‡∏ñ‡∏±‡∏á‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏•‡∏¥‡∏ï‡∏£)</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏£‡∏∏‡πà‡∏ô</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á</th>
                                </tr>
                            </thead>
                            <tbody id="generator-inventory">
                                <!-- Generator inventory will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Elevator Inventory -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üè¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏¥‡∏ü‡∏ï‡πå</h2>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300">
                            <thead class="bg-gradient-to-r from-blue-500 to-blue-600 text-white">
                                <tr>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                    <th class="border border-gray-300 px-4 py-3 text-left">‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</th>
                                </tr>
                            </thead>
                            <tbody id="elevator-inventory">
                                <!-- Elevator inventory will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md mx-4">
            <div class="text-center">
                <div class="text-green-500 text-6xl mb-4">‚úì</div>
                <h3 class="text-xl font-semibold mb-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
                <p class="text-gray-600 mb-4" id="success-message">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
                <button onclick="closeModal()" class="gradient-bg text-white px-6 py-2 rounded-lg">‡∏ï‡∏Å‡∏•‡∏á</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAkfwTB5ZOdEVAIBpx6jwGYRxJ-APUpkiU",
            authDomain: "hospital-surin-app.firebaseapp.com",
            projectId: "hospital-surin-app",
            storageBucket: "hospital-surin-app.firebasestorage.app",
            messagingSenderId: "430614964196",
            appId: "1:430614964196:web:31f9678ac47958f9f389f1",
            measurementId: "G-D8DE0MWP1L"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Connection status monitoring
        function updateConnectionStatus(isConnected) {
            const indicator = document.getElementById('status-indicator');
            const statusText = document.getElementById('status-text');
            
            if (isConnected) {
                indicator.className = 'w-3 h-3 rounded-full bg-green-400';
                statusText.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase';
            } else {
                indicator.className = 'w-3 h-3 rounded-full bg-red-400';
                statusText.textContent = '‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå';
            }
        }

        // Test Firebase connection
        async function testFirebaseConnection() {
            try {
                await db.collection('test').limit(1).get();
                updateConnectionStatus(true);
            } catch (error) {
                console.error('Firebase connection failed:', error);
                updateConnectionStatus(false);
            }
        }

        // Data
        const generatorData = [
            { kva: "1250 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£22", fuelCapacity: 2200, manufacturer: "MTU", model: "742RSL4048", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ß‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡∏î‡∏à‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "1000 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£2", fuelCapacity: 1400, manufacturer: "MTU", model: "N/A", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏≠‡∏µ‡πÄ‡∏≠ ‡πÄ‡∏°‡∏Ñ‡∏Ñ‡∏≤‡∏ô‡∏¥‡∏Å‡∏™‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "625 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£6", fuelCapacity: 1500, manufacturer: "MAN", model: "D2842LE203", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏¢‡∏ô‡∏ï‡πå‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ" },
            { kva: "1000 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£6", fuelCapacity: 2000, manufacturer: "Baudouin", model: "TTG000BM", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÑ‡∏ó‡∏¢‡πÄ‡∏ó‡∏Ñ ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "625 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£9", fuelCapacity: 1000, manufacturer: "Perkins", model: "2806A-E18TAG2", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÇ‡∏≠ ‡πÄ‡∏≠ ‡πÄ‡∏ã‡∏•‡∏•‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏¥‡∏™ ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "500 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£16", fuelCapacity: 1000, manufacturer: "FG Wilson", model: "P550-3", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ß‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡∏î‡∏à‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "625 Kva", location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£21", fuelCapacity: 800, manufacturer: "Cummins", model: "ECO40 15L4", provider: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏à‡∏µ61 ‡πÄ‡∏≠‡∏ô‡∏à‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡∏¥‡πà‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î" },
            { kva: "13.5 KW", location: "Kipor Mobile", fuelCapacity: 30, manufacturer: "Kipor", model: "N/A", provider: "N/A" }
        ];

        const elevatorData = [
            { location: "‡πÅ‡∏ü‡∏•‡∏ï ‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", type: "‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 12 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏û‡∏¥‡πÄ‡∏®‡∏©", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 12 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏û‡∏¥‡πÄ‡∏®‡∏©", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 14 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 14 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 14 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°", type: "‡∏Ç‡∏ô‡∏Ç‡∏¢‡∏∞", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 16 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÇ‡∏£‡∏Ñ‡∏°‡∏∞‡πÄ‡∏£‡πá‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏á‡∏Ü‡πå‡∏≠‡∏≤‡∏û‡∏≤‡∏ò", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏û‡πÇ‡∏≠‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 16 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÇ‡∏£‡∏Ñ‡∏°‡∏∞‡πÄ‡∏£‡πá‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏á‡∏Ü‡πå‡∏≠‡∏≤‡∏û‡∏≤‡∏ò", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏û‡πÇ‡∏≠‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 16 ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÇ‡∏£‡∏Ñ‡∏°‡∏∞‡πÄ‡∏£‡πá‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏á‡∏Ü‡πå‡∏≠‡∏≤‡∏û‡∏≤‡∏ò", type: "‡∏Ç‡∏ô‡∏Ç‡∏¢‡∏∞", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 17 ( ‡∏Ñ‡∏£‡∏±‡∏ß‡∏´‡∏•‡∏ß‡∏á)", type: "‡∏Ç‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 17 (‡∏ï‡∏∂‡∏Å‡πÅ‡∏•‡∏õ)", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 18 ‡∏ã‡∏±‡∏Å‡∏ü‡∏≠‡∏Å", type: "‡∏Ç‡∏ô‡∏Ç‡∏¢‡∏∞", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 21 ‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 21 ‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 22 100‡∏õ‡∏µ ‡∏õ‡∏µ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç‡πÑ‡∏ó‡∏¢", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 22 100‡∏õ‡∏µ ‡∏õ‡∏µ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç‡πÑ‡∏ó‡∏¢", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 22 100‡∏õ‡∏µ ‡∏õ‡∏µ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç‡πÑ‡∏ó‡∏¢", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡∏´‡∏ô‡∏µ‡πâ‡πÑ‡∏ü", manufacturer: "‡∏Æ‡∏¥‡∏ï‡∏≤‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 22 100‡∏õ‡∏µ ‡∏õ‡∏µ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç‡πÑ‡∏ó‡∏¢", type: "‡∏Ç‡∏ô ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£", manufacturer: "‡πÑ‡∏û‡πÇ‡∏≠‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2 ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2 ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2 ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡∏´‡∏ô‡∏µ‡πâ‡πÑ‡∏ü", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 4", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 4", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 6 ‡∏Å‡∏∏‡∏°‡∏≤‡∏£‡πÄ‡∏ß‡∏ä‡∏Å‡∏£‡∏£‡∏°", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏ü‡∏π‡∏à‡∏¥‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 9 ‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 9 ‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 9 ‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", type: "‡∏Ç‡∏ô‡∏Ç‡∏¢‡∏∞", manufacturer: "‡πÑ‡∏ó‡πÄ‡∏ó‡∏Ñ" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏¢‡∏≤", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏¢‡∏≤", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏¢‡∏≤", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" },
            { location: "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏¢‡∏≤", type: "‡∏•‡∏¥‡∏ü‡∏ó‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", manufacturer: "‡∏°‡∏¥‡∏ï‡∏ã‡∏π‡∏ö‡∏¥‡∏ä‡∏¥" }
        ];

        const waterPumpLocations = ["‡∏´‡∏≠‡∏™‡∏π‡∏á", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£2", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£4", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£6", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£9", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£12", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£14", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£16", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£17 (LAB)", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£21 (‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏û‡∏ó‡∏¢‡πå)", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£23 (OPD)"];
        const firePumpLocations = ["‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£2", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£21", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£22"];
        
        const departmentLocations = [
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏Å‡∏∏‡∏°‡∏≤‡∏£‡πÄ‡∏ß‡∏ä‡∏Å‡∏£‡∏£‡∏°", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏™‡∏π‡∏ï‡∏¥-‡∏ô‡∏£‡∏µ‡πÄ‡∏ß‡∏ä‡∏Å‡∏£‡∏£‡∏°", 
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÇ‡∏ò‡∏õ‡∏¥‡∏î‡∏¥‡∏Å‡∏™‡πå", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏à‡∏±‡∏Å‡∏©‡∏∏‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏´‡∏π ‡∏Ñ‡∏≠ ‡∏à‡∏°‡∏π‡∏Å", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ó‡∏±‡∏ô‡∏ï‡∏Å‡∏£‡∏£‡∏°",
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏£‡∏±‡∏á‡∏™‡∏µ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏û‡∏¢‡∏≤‡∏ò‡∏¥‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤", "‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ß‡∏ä‡∏Å‡∏£‡∏£‡∏°‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏à‡∏¥‡∏ï‡πÄ‡∏ß‡∏ä",
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô", "‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏£‡∏°", "‡πÅ‡∏ú‡∏ô‡∏Å‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•",
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô",
            "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ã‡∏±‡∏Å‡∏ü‡∏≠‡∏Å", "‡πÅ‡∏ú‡∏ô‡∏Å‡πÇ‡∏£‡∏á‡∏Ñ‡∏£‡∏±‡∏ß", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏ä‡πà‡∏≤‡∏á",
            "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£2", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£4", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£6", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£9", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£12", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£14", 
            "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£16", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£17", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£18", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£21", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£22", "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£23"
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('daily-date').value = new Date().toISOString().split('T')[0];
            document.getElementById('weekly-date').value = getWeekString();
            generateDailyInspectionItems();
            generateWeeklyInspectionItems();
            populateGeneratorInventory();
            populateElevatorInventory();
            updateIncidentLocationOptions();
            
            // Test Firebase connection
            testFirebaseConnection();
            
            // Test connection every 30 seconds
            setInterval(testFirebaseConnection, 30000);
        });

        function getWeekString() {
            const now = new Date();
            const year = now.getFullYear();
            const week = Math.ceil((now - new Date(year, 0, 1)) / (7 * 24 * 60 * 60 * 1000));
            return `${year}-W${week.toString().padStart(2, '0')}`;
        }

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('tab-active', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });

            // Show selected tab
            document.getElementById(`${tabName}-content`).classList.remove('hidden');
            document.getElementById(`${tabName}-tab`).classList.add('tab-active', 'text-white');
            document.getElementById(`${tabName}-tab`).classList.remove('bg-gray-200', 'text-gray-700');
        }

        function generateDailyInspectionItems() {
            // Water Pumps
            const waterPumpsContainer = document.getElementById('water-pumps');
            waterPumpsContainer.innerHTML = waterPumpLocations.map((location, index) => `
                <div class="bg-gray-50 rounded-lg p-4 card-hover transition-all">
                    <h4 class="font-semibold mb-3">${location}</h4>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <input type="radio" name="water-pump-${index}" value="normal" id="water-normal-${index}" class="text-green-500">
                            <label for="water-normal-${index}" class="text-sm">‡∏õ‡∏Å‡∏ï‡∏¥</label>
                        </div>
                        <div class="flex items-center space-x-2">
                            <input type="radio" name="water-pump-${index}" value="abnormal" id="water-abnormal-${index}" class="text-red-500">
                            <label for="water-abnormal-${index}" class="text-sm">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</label>
                        </div>
                        <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" class="w-full text-xs border rounded p-2 mt-2" rows="2"></textarea>
                    </div>
                </div>
            `).join('');

            // Fire Pumps
            const firePumpsContainer = document.getElementById('fire-pumps');
            firePumpsContainer.innerHTML = firePumpLocations.map((location, index) => `
                <div class="bg-gray-50 rounded-lg p-4 card-hover transition-all">
                    <h4 class="font-semibold mb-3">${location}</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Start Manual</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="fire-start-${index}" value="normal" class="mr-1">
                                    <span class="text-sm">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="fire-start-${index}" value="abnormal" class="mr-1">
                                    <span class="text-sm">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏•‡∏¥‡∏ï‡∏£)</label>
                            <input type="number" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô" class="w-full border rounded px-2 py-1 text-sm">
                        </div>
                        <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" class="w-full text-xs border rounded p-2" rows="2"></textarea>
                    </div>
                </div>
            `).join('');

            // Generators
            const generatorsContainer = document.getElementById('generators');
            generatorsContainer.innerHTML = generatorData.map((gen, index) => `
                <div class="bg-gray-50 rounded-lg p-4 card-hover transition-all">
                    <h4 class="font-semibold mb-2">${gen.location}</h4>
                    <p class="text-sm text-gray-600 mb-3">${gen.kva} - ${gen.manufacturer}</p>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="gen-status-${index}" value="normal" class="mr-1">
                                    <span class="text-sm">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="gen-status-${index}" value="abnormal" class="mr-1">
                                    <span class="text-sm">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏•‡∏¥‡∏ï‡∏£)</label>
                            <input type="number" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô" max="${gen.fuelCapacity}" class="w-full border rounded px-2 py-1 text-sm">
                        </div>
                        <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" class="w-full text-xs border rounded p-2" rows="2"></textarea>
                    </div>
                </div>
            `).join('');
        }

        function generateWeeklyInspectionItems() {
            const weeklyContainer = document.getElementById('weekly-inspections');
            
            // Generator inspection categories
            const generatorInspectionCategories = [
                {
                    title: "üîç 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Visual Inspection)",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏£‡∏±‡πà‡∏ß/‡πÄ‡∏®‡∏©‡∏™‡∏¥‡πà‡∏á‡∏™‡∏Å‡∏õ‡∏£‡∏Å)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á/‡∏à‡∏∏‡∏î‡∏¢‡∏∂‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡∏≤",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ñ‡∏±‡∏á‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏±‡πà‡∏ß‡∏ã‡∏∂‡∏° / ‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå)"
                    ]
                },
                {
                    title: "üõ¢Ô∏è 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á",
                    items: [
                        "‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏î‡∏µ‡πÄ‡∏ã‡∏•‡πÉ‡∏ô‡∏ñ‡∏±‡∏á (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≠‡∏¢‡∏£‡∏±‡πà‡∏ß‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡πà‡∏≠‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô",
                        "‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏î‡πâ)"
                    ]
                },
                {
                    title: "‚öôÔ∏è 3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô (Coolant)",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô‡πÉ‡∏ô‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥/‡∏ñ‡∏±‡∏á‡∏û‡∏±‡∏Å",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏≤‡∏¢‡∏¢‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏±‡πà‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏∑‡πà‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏û‡∏±‡∏î‡∏•‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô (‡∏™‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏´‡∏¢‡πà‡∏≠‡∏ô/‡πÅ‡∏ï‡∏Å)"
                    ]
                },
                {
                    title: "üîã 4. ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà",
                    items: [
                        "‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà (‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 12‚Äì14 ‡πÇ‡∏ß‡∏•‡∏ï‡πå)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏±‡πâ‡∏ß‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà (‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏•‡∏∑‡∏≠, ‡πÅ‡∏ô‡πà‡∏ô)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏≤‡∏¢‡πÑ‡∏ü‡πÅ‡∏•‡∏∞‡∏ü‡∏¥‡∏ß‡∏™‡πå"
                    ]
                },
                {
                    title: "üö¶ 5. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏á‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Ready / Alarm / Fault)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (‡∏°‡∏µ Error ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto/Manual (‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà Auto ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Standby)"
                    ]
                },
                {
                    title: "üß™ 6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Weekly Test)",
                    items: [
                        "Start Manual 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î (No Load Test)",
                        "‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏£‡∏µ‡∏¢‡∏ö/‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ (‡πÑ‡∏°‡πà‡∏î‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≤‡∏ß‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô / ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)"
                    ]
                }
            ];

            // Fire pump inspection categories
            const firePumpInspectionCategories = [
                {
                    title: "üîß 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Visual Inspection)",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏õ‡∏±‡πä‡∏° ‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏≠‡∏ö",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∂‡∏î‡∏Ç‡∏≠‡∏á‡∏ê‡∏≤‡∏ô‡∏¢‡∏∂‡∏î‡∏õ‡∏±‡πä‡∏° (Foundation bolt)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡πà‡∏≠/‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏õ‡∏•‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏£‡∏±‡πà‡∏ß",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏≤‡∏•‡πå‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"
                    ]
                },
                {
                    title: "‚öôÔ∏è 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Start Manual Test)",
                    items: [
                        "‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö Manual (‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏Ç‡∏ì‡∏∞‡∏õ‡∏±‡πä‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Pressure Gauge)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏ô (‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå‡∏î‡∏µ‡πÄ‡∏ã‡∏•)"
                    ]
                },
                {
                    title: "üõ¢Ô∏è 3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á (‡∏Å‡∏£‡∏ì‡∏µ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå‡∏î‡∏µ‡πÄ‡∏ã‡∏•)",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÉ‡∏ô‡∏ñ‡∏±‡∏á (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‚â• 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≠‡∏¢‡∏£‡∏±‡πà‡∏ß‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≠‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô"
                    ]
                },
                {
                    title: "üßØ 4. ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (‡∏Å‡∏£‡∏ì‡∏µ‡πÉ‡∏ä‡πâ‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó)",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà (12‚Äì14V)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏±‡πâ‡∏ß‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏•‡∏∑‡∏≠",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ä‡∏≤‡∏£‡πå‡∏à‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà"
                    ]
                },
                {
                    title: "üíß 5. ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô / ‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏û‡∏±‡∏Å",
                    items: [
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥ (‡∏Å‡∏£‡∏ì‡∏µ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥)",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≠‡∏¢‡∏£‡∏±‡πà‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô",
                        "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏û‡∏±‡∏î‡∏•‡∏° / ‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô"
                    ]
                }
            ];

            // Generate generator inspection sections for each generator
            const generatorSections = generatorData.map((generator, genIndex) => `
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg p-4 mb-6">
                        <h3 class="text-xl font-bold">‚ö° ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ ${generator.location}</h3>
                        <p class="text-sm opacity-90">${generator.kva} - ${generator.manufacturer} ${generator.model}</p>
                    </div>
                    
                    ${generatorInspectionCategories.map((category, catIndex) => `
                        <div class="mb-6">
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">${category.title}</h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                ${category.items.map((item, itemIndex) => `
                                    <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-blue-400">
                                        <h5 class="font-medium mb-3 text-sm">${item}</h5>
                                        <div class="flex space-x-4 mb-2">
                                            <label class="flex items-center">
                                                <input type="radio" name="gen-${genIndex}-cat-${catIndex}-item-${itemIndex}" value="normal" class="mr-2 text-green-500">
                                                <span class="text-sm text-green-700 font-medium">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="gen-${genIndex}-cat-${catIndex}-item-${itemIndex}" value="abnormal" class="mr-2 text-red-500">
                                                <span class="text-sm text-red-700 font-medium">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                            </label>
                                        </div>
                                        ${catIndex === 1 && itemIndex === 0 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏•‡∏¥‡∏ï‡∏£)</label>
                                                <input type="number" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô" max="${generator.fuelCapacity}" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        ${catIndex === 3 && itemIndex === 0 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà (‡πÇ‡∏ß‡∏•‡∏ï‡πå)</label>
                                                <input type="number" placeholder="12-14 V" min="10" max="16" step="0.1" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        ${catIndex === 5 && itemIndex === 3 ? `
                                            <div class="mt-2 grid grid-cols-2 gap-2">
                                                <div>
                                                    <label class="block text-xs font-medium text-gray-600 mb-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (bar)</label>
                                                    <input type="number" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô" step="0.1" class="w-full border rounded px-2 py-1 text-sm">
                                                </div>
                                                <div>
                                                    <label class="block text-xs font-medium text-gray-600 mb-1">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (¬∞C)</label>
                                                    <input type="number" placeholder="‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥" class="w-full border rounded px-2 py-1 text-sm">
                                                </div>
                                            </div>
                                        ` : ''}
                                        <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" class="w-full text-xs border rounded p-2 mt-2" rows="2"></textarea>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');

            // Generate fire pump inspection sections for each fire pump
            const firePumpSections = firePumpLocations.map((location, pumpIndex) => `
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg p-4 mb-6">
                        <h3 class="text-xl font-bold">üöí ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á ${location}</h3>
                        <p class="text-sm opacity-90">Fire Pump System</p>
                    </div>
                    
                    ${firePumpInspectionCategories.map((category, catIndex) => `
                        <div class="mb-6">
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">${category.title}</h4>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                ${category.items.map((item, itemIndex) => `
                                    <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-red-400">
                                        <h5 class="font-medium mb-3 text-sm">${item}</h5>
                                        <div class="flex space-x-4 mb-2">
                                            <label class="flex items-center">
                                                <input type="radio" name="fire-${pumpIndex}-cat-${catIndex}-item-${itemIndex}" value="normal" class="mr-2 text-green-500">
                                                <span class="text-sm text-green-700 font-medium">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="fire-${pumpIndex}-cat-${catIndex}-item-${itemIndex}" value="abnormal" class="mr-2 text-red-500">
                                                <span class="text-sm text-red-700 font-medium">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                            </label>
                                        </div>
                                        ${catIndex === 1 && itemIndex === 1 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏õ‡∏±‡πä‡∏° (bar)</label>
                                                <input type="number" placeholder="‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô" step="0.1" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        ${catIndex === 2 && itemIndex === 0 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡∏•‡∏¥‡∏ï‡∏£)</label>
                                                <input type="number" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        ${catIndex === 3 && itemIndex === 0 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà (‡πÇ‡∏ß‡∏•‡∏ï‡πå)</label>
                                                <input type="number" placeholder="12-14 V" min="10" max="16" step="0.1" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        ${catIndex === 4 && itemIndex === 0 ? `
                                            <div class="mt-2">
                                                <label class="block text-xs font-medium text-gray-600 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô (%)</label>
                                                <input type="number" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥" min="0" max="100" class="w-full border rounded px-2 py-1 text-sm">
                                            </div>
                                        ` : ''}
                                        <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" class="w-full text-xs border rounded p-2 mt-2" rows="2"></textarea>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');

            // Other equipment sections
            const otherEquipmentSections = `
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-4 mb-6">
                        <h3 class="text-xl font-bold">üè¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏∂‡∏Å</h3>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö", "‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ñ‡∏±‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏ô‡πâ‡∏≥", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Pressure Tank", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Auto Control", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥"].map((item, itemIndex) => `
                            <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-blue-400">
                                <h4 class="font-medium mb-2 text-sm">${item}</h4>
                                <div class="flex space-x-4 mb-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="water-system-${itemIndex}" value="normal" class="mr-1">
                                        <span class="text-sm">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="water-system-${itemIndex}" value="abnormal" class="mr-1">
                                        <span class="text-sm">‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</span>
                                    </label>
                                </div>
                                <textarea placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" class="w-full text-xs border rounded p-2" rows="2"></textarea>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            weeklyContainer.innerHTML = generatorSections + firePumpSections + otherEquipmentSections;
        }

        function populateGeneratorInventory() {
            const inventoryContainer = document.getElementById('generator-inventory');
            inventoryContainer.innerHTML = generatorData.map(gen => `
                <tr class="hover:bg-gray-50">
                    <td class="border border-gray-300 px-4 py-3">${gen.kva}</td>
                    <td class="border border-gray-300 px-4 py-3">${gen.location}</td>
                    <td class="border border-gray-300 px-4 py-3">${gen.fuelCapacity}</td>
                    <td class="border border-gray-300 px-4 py-3">${gen.manufacturer}</td>
                    <td class="border border-gray-300 px-4 py-3">${gen.model}</td>
                    <td class="border border-gray-300 px-4 py-3">${gen.provider}</td>
                </tr>
            `).join('');
        }

        function populateElevatorInventory() {
            const elevatorContainer = document.getElementById('elevator-inventory');
            elevatorContainer.innerHTML = elevatorData.map(elevator => `
                <tr class="hover:bg-gray-50">
                    <td class="border border-gray-300 px-4 py-3">${elevator.location}</td>
                    <td class="border border-gray-300 px-4 py-3">${elevator.type}</td>
                    <td class="border border-gray-300 px-4 py-3">${elevator.manufacturer}</td>
                </tr>
            `).join('');
        }

        function updateIncidentLocationOptions() {
            const typeSelect = document.getElementById('incident-type');
            const locationSelect = document.getElementById('incident-location');
            
            typeSelect.addEventListener('change', function() {
                locationSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å/‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</option>';
                
                if (this.value === 'generator') {
                    generatorData.forEach(gen => {
                        locationSelect.innerHTML += `<option value="${gen.location}">${gen.location}</option>`;
                    });
                } else if (this.value === 'fire-pump') {
                    firePumpLocations.forEach(location => {
                        locationSelect.innerHTML += `<option value="${location}">${location}</option>`;
                    });
                } else if (this.value === 'water-pump') {
                    waterPumpLocations.forEach(location => {
                        locationSelect.innerHTML += `<option value="${location}">${location}</option>`;
                    });
                } else if (this.value === 'elevator') {
                    const uniqueLocations = [...new Set(elevatorData.map(elevator => elevator.location))];
                    uniqueLocations.forEach(location => {
                        locationSelect.innerHTML += `<option value="${location}">${location}</option>`;
                    });
                } else if (this.value === 'electrical' || this.value === 'plumbing' || this.value === 'air-conditioning') {
                    departmentLocations.forEach(location => {
                        locationSelect.innerHTML += `<option value="${location}">${location}</option>`;
                    });
                }
            });
        }

        async function saveDailyInspection() {
            const date = document.getElementById('daily-date').value;
            const shift = document.getElementById('shift-select').value;
            
            // Collect all inspection data
            const inspectionData = {
                date: date,
                shift: shift,
                waterPumps: [],
                firePumps: [],
                generators: [],
                timestamp: new Date().toISOString(),
                type: 'daily'
            };

            try {
                // Save to Firebase Firestore
                await db.collection('inspections').add(inspectionData);
                
                // Also save to localStorage as backup
                const existingData = JSON.parse(localStorage.getItem('dailyInspections') || '[]');
                existingData.push(inspectionData);
                localStorage.setItem('dailyInspections', JSON.stringify(existingData));

                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Firebase ‡πÅ‡∏•‡πâ‡∏ß');
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                // Fallback to localStorage only
                const existingData = JSON.parse(localStorage.getItem('dailyInspections') || '[]');
                existingData.push(inspectionData);
                localStorage.setItem('dailyInspections', JSON.stringify(existingData));
                
                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)');
            }
        }

        async function saveWeeklyInspection() {
            const week = document.getElementById('weekly-date').value;
            
            const inspectionData = {
                week: week,
                timestamp: new Date().toISOString(),
                type: 'weekly'
            };

            try {
                // Save to Firebase Firestore
                await db.collection('inspections').add(inspectionData);
                
                // Also save to localStorage as backup
                const existingData = JSON.parse(localStorage.getItem('weeklyInspections') || '[]');
                existingData.push(inspectionData);
                localStorage.setItem('weeklyInspections', JSON.stringify(existingData));

                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Firebase ‡πÅ‡∏•‡πâ‡∏ß');
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                // Fallback to localStorage only
                const existingData = JSON.parse(localStorage.getItem('weeklyInspections') || '[]');
                existingData.push(inspectionData);
                localStorage.setItem('weeklyInspections', JSON.stringify(existingData));
                
                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)');
            }
        }

        // Incident form handling
        document.getElementById('incident-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const incidentData = {
                id: Date.now(),
                date: document.getElementById('incident-date').value,
                type: document.getElementById('incident-type').value,
                location: document.getElementById('incident-location').value,
                severity: document.getElementById('incident-severity').value,
                repairTime: document.getElementById('repair-time').value,
                description: document.getElementById('incident-description').value,
                action: document.getElementById('incident-action').value,
                status: document.getElementById('incident-status').value,
                repairSender: document.getElementById('repair-sender').value,
                reporter: document.getElementById('incident-reporter').value,
                timestamp: new Date().toISOString()
            };

            try {
                // Save to Firebase Firestore
                await db.collection('incidents').add(incidentData);
                
                // Also save to localStorage as backup
                const existingIncidents = JSON.parse(localStorage.getItem('incidents') || '[]');
                existingIncidents.unshift(incidentData);
                localStorage.setItem('incidents', JSON.stringify(existingIncidents));

                this.reset();
                loadIncidentHistory();
                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Firebase ‡πÅ‡∏•‡πâ‡∏ß');
            } catch (error) {
                console.error('Error saving incident to Firebase:', error);
                // Fallback to localStorage only
                const existingIncidents = JSON.parse(localStorage.getItem('incidents') || '[]');
                existingIncidents.unshift(incidentData);
                localStorage.setItem('incidents', JSON.stringify(existingIncidents));

                this.reset();
                loadIncidentHistory();
                showSuccessModal('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)');
            }
        });

        async function loadIncidentHistory() {
            const historyContainer = document.getElementById('incident-history');
            let incidents = [];

            try {
                // Try to load from Firebase first
                const snapshot = await db.collection('incidents')
                    .orderBy('timestamp', 'desc')
                    .limit(10)
                    .get();
                
                incidents = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                
                // If no Firebase data, fallback to localStorage
                if (incidents.length === 0) {
                    incidents = JSON.parse(localStorage.getItem('incidents') || '[]');
                }
            } catch (error) {
                console.error('Error loading from Firebase:', error);
                // Fallback to localStorage
                incidents = JSON.parse(localStorage.getItem('incidents') || '[]');
            }
            
            if (incidents.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-center py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</p>';
                return;
            }

            historyContainer.innerHTML = incidents.slice(0, 10).map(incident => {
                const severityColors = {
                    low: 'bg-green-100 text-green-800',
                    medium: 'bg-yellow-100 text-yellow-800',
                    high: 'bg-orange-100 text-orange-800',
                    critical: 'bg-red-100 text-red-800'
                };

                const statusColors = {
                    'in-progress': 'bg-blue-100 text-blue-800',
                    'forwarded': 'bg-purple-100 text-purple-800',
                    'waiting': 'bg-orange-100 text-orange-800',
                    'completed': 'bg-green-100 text-green-800'
                };

                const statusText = {
                    'in-progress': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                    'forwarded': '‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠',
                    'waiting': '‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥',
                    'completed': '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'
                };

                const typeText = {
                    'generator': '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤',
                    'fire-pump': '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á',
                    'water-pump': '‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏ö‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏∂‡∏Å',
                    'elevator': '‡∏•‡∏¥‡∏ü‡∏ï‡πå',
                    'electrical': '‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤',
                    'plumbing': '‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏õ‡∏≤',
                    'air-conditioning': '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®'
                };

                return `
                    <div class="border rounded-lg p-4 bg-gray-50">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold">${incident.location} - ${typeText[incident.type] || incident.type}</h4>
                            <div class="flex space-x-2">
                                <span class="px-2 py-1 rounded text-xs ${severityColors[incident.severity]}">${incident.severity}</span>
                                <span class="px-2 py-1 rounded text-xs ${statusColors[incident.status] || 'bg-gray-100 text-gray-800'}">${statusText[incident.status] || incident.status}</span>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${incident.description}</p>
                        ${incident.action ? `<p class="text-sm text-blue-600 mb-2"><strong>‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:</strong> ${incident.action}</p>` : ''}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-gray-500 mb-2">
                            ${incident.repairTime ? `<span>‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ${incident.repairTime} ‡∏ô‡∏≤‡∏ó‡∏µ</span>` : ''}
                            ${incident.repairSender ? `<span>üîß ‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°: ${incident.repairSender}</span>` : ''}
                        </div>
                        <div class="text-xs text-gray-500">
                            <span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢: ${incident.reporter}</span> | 
                            <span>${new Date(incident.date).toLocaleString('th-TH')}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showSuccessModal(message) {
            document.getElementById('success-message').textContent = message;
            document.getElementById('success-modal').classList.remove('hidden');
            document.getElementById('success-modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('success-modal').classList.add('hidden');
            document.getElementById('success-modal').classList.remove('flex');
        }

        // Load incident history on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadIncidentHistory();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'967afb37b6f3ee62',t:'MTc1Mzk0MjczNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
